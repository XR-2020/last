webpackJsonp([10],{Oq88:function(e,t){},u48C:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("IQOC"),i("Nv5k"),i("Ntl1");var a=i("7GrU"),l=i("cqzl"),n=i("rraK"),r={name:"longitudinal_per",data:function(){return{role:localStorage.getItem("ms_role"),pageTotal:0,query:{key:"",type:"社科处_7.科研获奖",pageIndex:1,pageSize:10},header:!1,isdetail:!1,tableData:[],people:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,form:{},idx:-1,idList:[],teacher_list:[],isInput:!0}},created:function(){var e=this;this.getData(),Object(a.m)().then(function(t){e.teacher_list=t})},computed:{data:function(){var e=this;return this.tableData.filter(function(t){for(var i=!1,a=0;a<e.del_list.length;a++)if(t.name===e.del_list[a].name){i=!0;break}if(!i&&t.address.indexOf(e.select_cate)>-1&&(t.name.indexOf(e.select_word)>-1||t.address.indexOf(e.select_word)>-1))return t})}},methods:{change:function(){this.isInput=!1},onSubmit:function(){var e=this;this.editVisible=!1,console.log(this.form),Object(n.c)(this.form).then(function(t){0!==t?(e.$message.success("修改成功"),e.$set(e.tableData,e.idx,e.form)):e.$message.error("修改失败"),e.getData()})},crawlerWeb:function(e){var t=this;alert("正在爬取....请稍后"),Object(l.b)({crawlertd:e}).then(function(e){alert(e),t.getData()})},handleCurrentChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},closeDialog:function(){this.editVisible=!1},getData:function(){var e=this;""!==this.query.key?Object(n.e)(this.query).then(function(t){e.tableData=t.list,e.pageTotal=t.pageTotal}):Object(n.d)(this.query).then(function(t){e.tableData=t.list,e.pageTotal=t.pageTotal})},search:function(){var e=this;Object(n.e)(this.query).then(function(t){e.tableData=t.list,e.pageTotal=t.pageTotal}),this.is_search=!0},formatter:function(e,t){return e.address},handleDetail:function(e,t){var i=this;Object(n.f)({id:t.id,type:t.type}).then(function(e){i.people=e.data}),this.isdetail=!0},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){var i=this;Object(n.g)({id:t.id,type:t.type}).then(function(e){i.form.people=e.data}),this.form=t,this.editVisible=!0},handleDelete:function(e,t){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){Object(n.a)({id:t.id,type:t.type}).then(function(e){i.getData(),i.$message.success("删除成功")}).catch(function(){i.$message.error("删除失败")})}).catch(function(){})},delAll:function(){var e=this;this.idList.length>0&&this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){Object(n.b)({ids:e.idList,type:"社科处_7.科研获奖"}).then(function(t){e.$message.success("删除成功"),e.getData()})})},handleSelectionChange:function(e){this.idList=[];for(var t=0;t<e.length;t++)this.idList.push(e[t].id)},saveEdit:function(){this.$set(this.tableData,this.idx,this.form),this.editVisible=!1,this.$message.success("修改第 "+(this.idx+1)+" 行成功")},deleteRow:function(){this.tableData.splice(this.idx,1),this.$message.success("删除成功"),this.delVisible=!1}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-tickets"}),e._v("科研获奖")])],1)],1),e._v(" "),i("div",{staticClass:"container",staticStyle:{width:"1000px"}},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.query.key,callback:function(t){e.$set(e.query,"key",t)},expression:"query.key"}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{icon:"search",type:"primary"},on:{click:function(t){e.crawlerWeb("社科处_7.科研获奖")}}},[e._v("爬取原网站")])],1),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"partment",label:"部门",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"chengguotype",label:"成果类别",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"huojiangleibie",label:"获奖类别",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"danwei",label:"奖励单位",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"jianglijibie",label:"奖励级别",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"jianglidengji",label:"奖励等级",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"finishtime",label:"完成时间",width:"120",align:"center"}}),e._v(" "),"4"===e.role||"2"===e.role?i("el-table-column",{attrs:{label:"操作",width:"260px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",type:"info"},on:{click:function(i){e.handleDetail(t.$index,t.row)}}},[e._v("查看参与人")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])}):i("el-table-column",{attrs:{label:"操作",width:"260px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",type:"info"},on:{click:function(i){e.handleDetail(t.$index,t.row)}}},[e._v("查看参与人")])]}}])})],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),i("router-link",{attrs:{to:"/社科处项目申报"}},[i("el-button",{attrs:{type:"primary"}},[e._v("社科项目申报")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"50%"},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"部门"}},[i("el-input",{staticStyle:{width:"310px"},model:{value:e.form.partment,callback:function(t){e.$set(e.form,"partment",t)},expression:"form.partment"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"成果类别"}},[i("el-input",{staticStyle:{width:"310px"},model:{value:e.form.chengguotype,callback:function(t){e.$set(e.form,"chengguotype",t)},expression:"form.chengguotype"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"获奖类别"}},[i("el-input",{staticStyle:{width:"310px"},model:{value:e.form.huojiangleibie,callback:function(t){e.$set(e.form,"huojiangleibie",t)},expression:"form.huojiangleibie"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖励等级"}},[i("el-input",{staticStyle:{width:"310px"},model:{value:e.form.jianglidengji,callback:function(t){e.$set(e.form,"jianglidengji",t)},expression:"form.jianglidengji"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖励单位"}},[i("el-input",{staticStyle:{width:"310px"},model:{value:e.form.danwei,callback:function(t){e.$set(e.form,"danwei",t)},expression:"form.danwei"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖励级别"}},[i("el-input",{staticStyle:{width:"310px"},model:{value:e.form.jianglijibie,callback:function(t){e.$set(e.form,"jianglijibie",t)},expression:"form.jianglijibie"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"参与人情况"}},[i("el-select",{attrs:{multiple:"",filterable:""},model:{value:e.form.people,callback:function(t){e.$set(e.form,"people",t)},expression:"form.people"}},e._l(e.teacher_list,function(e){return i("el-option",{key:e.badge,attrs:{label:e.badge+"—"+e.name,value:e.badge}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"完成时间"}},[i("el-col",{attrs:{span:11}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:e.change},model:{value:e.form.finishtime,callback:function(t){e.$set(e.form,"finishtime",t)},expression:"form.finishtime"}})],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.isdetail,width:"50%"},on:{"update:visible":function(t){e.isdetail=t}}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.people,border:""}},[i("el-table-column",{attrs:{prop:"badge",label:"完成人工号",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"完成人",align:"center"}})],1)],1)],1)},staticRenderFns:[]};var o=i("VU/8")(r,s,!1,function(e){i("Oq88")},"data-v-d293c384",null);t.default=o.exports}});